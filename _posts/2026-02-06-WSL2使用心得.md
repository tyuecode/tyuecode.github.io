---
layout: post
title: "WSL2使用心得"
date: 2026-02-02 10:00:00 +0800
categories: [工具分享]  # 精准分类
tags: [WSL2, iflow]     # 细分标签
excerpt: "本文分享WSL2使用体验及教程，及iflow缓存位置更改的一种方案。"  # 自定义摘要
---

本文分享WSL2使用体验及教程，及iflow缓存位置更改的一种方案。

<!--more-->  <!-- 摘要分隔符，前面内容会作为首页摘要 -->

## 一、WSL2 简介
WSL（Windows Subsystem for Linux） 是微软在Windows 10/11中集成的Linux兼容层，WSL2是其第二代架构，主要特点：

- 完整Linux内核：在轻量级虚拟机中运行真正的Linux内核
- 高性能：文件系统性能显著提升，接近原生Linux
- 系统集成：与Windows深度集成，支持GUI应用
- 开发友好：无需双系统即可使用Linux环境
- 文件互通：可直接在系统间访问对方文件

## 二、安装及使用

### 一键安装
```powershell
# 以管理员身份打开PowerShell
wsl --install
# 默认安装Ubuntu，重启后完成配置
```
### 基础命令
```bash
# 查看已安装的发行版
wsl --list --verbose  # 或 wsl -l -v

# 设置默认发行版
wsl --set-default <发行版名称>

# 终止运行中的发行版
wsl --terminate <发行版名称>

# 关闭WSL
wsl --shutdown

# 导出/导入发行版（备份/迁移）
wsl --export <发行版> <导出路径.tar>
wsl --import <新发行版名称> <安装路径> <导入文件.tar>

# 卸载发行版
wsl --unregister <发行版名称>
```
更多内容请参考[官方文档](https://learn.microsoft.com/zh-cn/windows/wsl/)。
### 存储位置备份及迁移
WSL可以通过备份再导出的方式实现类似虚拟机快照的功能
```powershell
# 首先关闭所有WSL实例
wsl --shutdown

# 创建快照:
# 导出发行版到文件(Ubuntu为例)
wsl --export Ubuntu D:\WSL-Backup\ubuntu.tar

#载入快照：
# 卸载当前发行版
wsl --unregister Ubuntu
# 导入发行版
wsl --import Ubuntu D:\WSL\Ubuntu D:\WSL-Backup\ubuntu.tar
```
WSL可将存储位置迁移到D盘以节省C盘空间
```powershell
# 1.关闭所有WSL实例
wsl --shutdown
# 确认已停止
wsl -l -v

# 2.创建备份目录（D盘）
mkdir D:\WSL-Backup
# 导出发行版到文件（以Ubuntu为例）
wsl --export Ubuntu D:\WSL-Backup\ubuntu.tar
# 如果有多个发行版，分别导出
wsl --export Ubuntu-20.04 D:\WSL-Backup\ubuntu2004.tar
wsl --export Debian D:\WSL-Backup\debian.tar

#3.卸载发行版（已备份）
wsl --unregister Ubuntu
# 确认已卸载
wsl -l -v

#4.在D盘创建WSL存储目录
mkdir D:\WSL\Ubuntu
# 导入到新位置
wsl --import Ubuntu D:\WSL\Ubuntu D:\WSL-Backup\ubuntu.tar --version 2
```
## 三、使用iFLOW
iFlow CLI 是一款终端AI助手，可以分析代码、执行编程任务、处理文件操作。
[使用说明](https://platform.iflow.cn/cli/quickstart)

它的使用非常简单，效果也还说得过去，最重要的是提供了免费的大模型，可以实现零成本帮你干活，但是我之前一直找不到合适的方法迁移它的缓存(默认C盘)，并且Windows和命令行在一起听起来好像有点怪😅遂搁置。

使用WSL之后发现他们两个倒是挺般配，WSL提供的Linux环境原生支持命令行，一句话就能安装，且iflow的缓存在WSL内部，可通过上述方法迁移(C盘终于得到了解脱~🎉)。

由于WSL和宿主系统间可以互通内存(挂载在"/mnt/"下)，所以可以很方便的使用WSL中的iflow分析宿主系统中的文件👍。
